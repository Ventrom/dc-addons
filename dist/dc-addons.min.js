/*!
 * dc-addons-cleanup v0.0.1
 *
 * 2016-09-02 16:59:22
 *
 */
dc.utils.getAllFilters||(dc.utils.getAllFilters=function(){var a={},b=dc.chartRegistry.list();for(var c in b){var d=b[c];a[d.chartID()]=d.filters()}return a}),function(){"use strict";return!dc.baseMapChart&&void(dc.baseMapChart=function(a){a=dc.baseChart(a);var b,c=!0,d=!1,e=!1,f=!1,g=!1,h=function(a){L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(a)},i=function(b){return a.title()(b)};return a._doRender=function(){},a._postRender=function(){},a.toLocArray=function(){},a.mapOptions=function(b){return arguments.length?(d=b,a):d},a.center=function(b){return arguments.length?(e=b,a):e},a.zoom=function(b){return arguments.length?(f=b,a):f},a.tiles=function(b){return arguments.length?(h=b,a):h},a.map=function(a){return arguments.length?b=a:b},a.popup=function(b){return arguments.length?(i=b,a):i},a.renderPopup=function(b){return arguments.length?(c=b,a):c},a.brushOn=function(b){return arguments.length?(g=b,a):g},a})}(),function(){"use strict";return!dc.baseLeafletChart&&void(dc.baseLeafletChart=function(a){return a=dc.baseMapChart(a),a._doRender=function(){var b=L.map(a.root().node(),a.mapOptions());return a.center()&&a.zoom()&&b.setView(a.toLocArray(a.center()),a.zoom()),a.tiles()(b),a.map(b),a._postRender(),a._doRedraw()},a.toLocArray=function(a){
// else expects [11.111,1.111]
// expects '11.111,1.111'
return"string"==typeof a&&(a=a.split(",")),a},a})}(),function(){"use strict";return!dc.leafletChoroplethChart&&void(dc.leafletChoroplethChart=function(a,b){var c=dc.colorChart(dc.baseLeafletChart({})),d=!1,e=[],f=!1,g={fillColor:"black",color:"gray",opacity:.4,fillOpacity:.6,weight:1},h=function(a){return a.key},i=function(a){var b=e[c.featureKeyAccessor()(a)],d=c.featureOptions(),f=d instanceof Function;return f&&(d=d(a,b)),d=JSON.parse(JSON.stringify(d)),b&&b.d&&!f&&(d.fillColor=c.getColor(b.d,b.i),c.filters().indexOf(b.d.key)!==-1&&(d.opacity=.8,d.fillOpacity=1)),d};c._postRender=function(){d=L.geoJson(c.geojson(),{style:c.featureStyle(),onEachFeature:j}),c.map().addLayer(d)},c._doRedraw=function(){d.clearLayers(),e=[],c._computeOrderedGroups(c.data()).forEach(function(a,b){e[c.keyAccessor()(a)]={d:a,i:b}}),d.addData(c.geojson())},c.geojson=function(a){return arguments.length?(f=a,c):f},c.featureOptions=function(a){return arguments.length?(g=a,c):g},c.featureKeyAccessor=function(a){return arguments.length?(h=a,c):h},c.featureStyle=function(a){return arguments.length?(i=a,c):i};var j=function(a,b){var d=e[c.featureKeyAccessor()(a)];d&&d.d&&(b.key=d.d.key,c.renderPopup()&&b.bindPopup(c.popup()(d.d,a)),c.brushOn()&&b.on("click",k))},k=function(a){if(a.target){var b=a.target.key;dc.events.trigger(function(){c.filter(b),dc.redrawAll(c.chartGroup())})}};return c.anchor(a,b)})}(),function(){"use strict";return!dc.leafletMarkerChart&&void(dc.leafletMarkerChart=function(a,b){var c=dc.baseLeafletChart({}),d=!1,e=!1,f=!1,g=!0,h=!1,i=!1,j=!1,k=!1,l={},m=!0,n=!1,o=!1,p=!0,q=!1;c.renderTitle(!0);var r=function(a){return c.keyAccessor()(a)},s=function(a){var b=new L.Marker(c.toLocArray(c.locationAccessor()(a)),{title:c.renderTitle()?c.title()(a):"",alt:c.renderTitle()?c.title()(a):"",icon:t(a,c.map()),clickable:c.renderPopup()||c.brushOn()&&!h,draggable:!1});return b},t=function(a,b){return new L.Icon.Default},u=function(a,b){return c.title()(a)};c._postRender=function(){c.brushOn()&&(h&&c.filterHandler(y),c.map().on("zoomend moveend",x,this),h||c.map().on("click",x,this),c.map().on("zoomstart",w,this)),k=d?new L.MarkerClusterGroup(e?e:null):new L.LayerGroup,c.map().addLayer(k)},c._doRedraw=function(){var a=c._computeOrderedGroups(c.data()).filter(function(a){return 0!==c.valueAccessor()(a)});f&&(l={}),k.clearLayers();var b=[];if(a.forEach(function(a,d){var e=c.keyAccessor()(a),g=null;g=!f&&e in l?l[e]:v(a,e);var h=c.filters(),i=h.length?.3:1;h.forEach(function(a){e===a&&(i=1)}),g.setOpacity(i),c.cluster()?b.push(g):k.addLayer(g)}),c.cluster()&&b.length>0&&k.addLayers(b),b.length>0&&(m||n&&!o)){var d=new L.featureGroup(b);c.map().fitBounds(d.getBounds())}o=!1,m=!1},c.locationAccessor=function(a){return arguments.length?(r=a,c):r},c.marker=function(a){return arguments.length?(s=a,c):s},c.icon=function(a){return arguments.length?(t=a,c):t},c.popup=function(a){return arguments.length?(u=a,c):u},c.renderPopup=function(a){return arguments.length?(p=a,c):p},c.popupOnHover=function(a){return arguments.length?(q=a,c):q},c.cluster=function(a){return arguments.length?(d=a,c):d},c.clusterOptions=function(a){return arguments.length?(e=a,c):e},c.rebuildMarkers=function(a){return arguments.length?(f=a,c):f},c.brushOn=function(a){return arguments.length?(g=a,c):g},c.filterByArea=function(a){return arguments.length?(h=a,c):h},c.fitOnRender=function(a){return arguments.length?(m=a,c):m},c.fitOnRedraw=function(a){return arguments.length?(n=a,c):n},c.markerGroup=function(){return k};var v=function(a,b){var d=s(a);return d.key=b,c.renderPopup()&&(d.bindPopup(c.popup()(a,d)),c.popupOnHover()&&(d.on("mouseover",function(){d.openPopup()}),d.on("mouseout",function(){d.closePopup()}))),c.brushOn()&&!h&&d.on("click",z),l[b]=d,d},w=function(a){j=!0},x=function(a){if("moveend"!==a.type||!j&&!a.hard)if(j=!1,o=!0,h){var b;b=c.map().getCenter().equals(c.center())&&c.map().getZoom()===c.zoom()?null:c.map().getBounds(),dc.events.trigger(function(){c.filter(null),b&&(i=!0,c.filter(b),i=!1),dc.redrawAll(c.chartGroup())})}else c.filter()&&("click"===a.type||l.hasOwnProperty(c.filter())&&!c.map().getBounds().contains(l[c.filter()].getLatLng()))&&dc.events.trigger(function(){c.filter(null),p&&c.map().closePopup(),dc.redrawAll(c.chartGroup())})},y=function(a,b){o=!0,c.dimension().filter(null),b&&b.length>0&&(c.dimension().filterFunction(function(a){if(!(a in l))return!1;var c=l[a].getLatLng();return c&&b[0].contains(c)}),i||c.map().getBounds().toString===b[0].toString()||c.map().fitBounds(b[0]))},z=function(a){if(a.target){o=!0;var b=a.target.key;dc.events.trigger(function(){c.filter(b),dc.redrawAll(c.chartGroup())})}};return c.anchor(a,b)})}(),function(){"use strict";return!dc.leafletCustomChart&&void(dc.leafletCustomChart=function(a,b){var c=dc.baseLeafletChart({}),d=null,e=null;return c.renderTitle(!0),c._postRender=function(){var a=c._computeOrderedGroups(c.data());a.forEach(function(a,b){c.renderItem()(c,c.map(),a,b)})},c._doRedraw=function(){var a=c._computeOrderedGroups(c.data()),b=c.valueAccessor();a.forEach(function(a,d){a.filtered=0===b(a),c.redrawItem()(c,c.map(),a,d)})},c.redrawItem=function(a){return arguments.length?(d=a,c):d},c.renderItem=function(a){return arguments.length?(e=a,c):e},c.anchor(a,b)})}(),
//Legend code adapted from http://leafletjs.com/examples/choropleth.html
dc.leafletLegend=function(){var a,b={},c=null,d="bottomleft";b.parent=function(b){return arguments.length?(a=b,this):a};var e=function(){return L.Control.extend({options:{position:d},onAdd:function(a){return this._div=L.DomUtil.create("div","info legend"),a.on("moveend",this._update,this),this._update(),this._div},_update:function(){if(a.colorDomain()){// check because undefined for marker charts
var b,c=a.colorDomain()[0],d=a.colorDomain()[1],e=a.colors().range(),f=a.colors().range().length,g=(d-c)/f,h=[];for(h[0]=Math.round(c),b=1;b<f;b++)h[b]=Math.round((.5+(b-1))*g+c);//reset so that legend is not plotted multiple times
for(
// var div = L.DomUtil.create('div', 'info legend');
// loop through our density intervals and generate a label with a colored
// square for each interval
this._div.innerHTML="",b=0;b<h.length;b++)this._div.innerHTML+='<i style="background:'+e[b]+'"></i> '+h[b]+(h[b+1]?"&ndash;"+h[b+1]+"<br>":"+")}}})};return b.LegendClass=function(a){return arguments.length?(e=a,b):e},b.render=function(){
// unfortunately the dc.js legend has no concept of redraw, it's always render
if(!c){
// fetch the legend class creator, invoke it
var d=b.LegendClass()();
// and constuct that class
c=new d,c.addTo(a.map())}return b.redraw()},b.redraw=function(){return c._update(),b},b.leafletLegend=function(){return c},b.position=function(a){return arguments.length?(d=a,b):d},b},function(){"use strict";return!dc.baseGoogleChart&&void(dc.baseGoogleChart=function(a){return a=dc.baseMapChart(a),a._doRender=function(){var b=new google.maps.Map(a.root().node(),a.mapOptions());return a.center()&&a.zoom()&&(b.setCenter(a.toLocArray(a.center())),b.setZoom(a.zoom())),a.map(b),a._postRender(),a._doRedraw()},a.toLocArray=function(a){
// else expects [11.111,1.111]
// expects '11.111,1.111'
return"string"==typeof a&&(a=a.split(",")),new google.maps.LatLng(a[0],a[1])},a})}(),function(){"use strict";return!dc.googleChoroplethChart&&void(dc.googleChoroplethChart=function(a,b){var c=dc.colorChart(dc.baseGoogleChart({})),d=[],e=!1,f=!1,g={fillColor:"black",color:"gray",opacity:.4,fillOpacity:.6,weight:1},h=null,i=function(a){return a.key},j=function(a){var b=c.featureOptions();b instanceof Function&&(b=b(a)),b=JSON.parse(JSON.stringify(b));var e=d[c.featureKeyAccessor()(a)];return e&&e.d&&(b.fillColor=c.getColor(e.d,e.i),c.filters().indexOf(e.d.key)!==-1&&(b.opacity=.8,b.fillOpacity=1)),b};c._postRender=function(){f="string"==typeof e?c.map().data.loadGeoJson(e):c.map().data.addGeoJson(e),c.map().data.setStyle(c.featureStyle()),k()},c._doRedraw=function(){d=[],c._computeOrderedGroups(c.data()).forEach(function(a,b){d[c.keyAccessor()(a)]={d:a,i:b}}),c.map().data.setStyle(c.featureStyle())},c.geojson=function(a){return arguments.length?(e=a,c):e},c.featureOptions=function(a){return arguments.length?(g=a,c):g},c.featureKeyAccessor=function(a){return arguments.length?(i=a,c):i},c.featureStyle=function(a){return arguments.length?(j=a,c):j};var k=function(a,b){c.renderPopup()&&c.map().data.addListener("click",function(a){var b=new google.maps.MVCObject,e=d[c.featureKeyAccessor()(a.feature)];h&&h.close(),e||(e={}),e.d||(e.d={}),h=new google.maps.InfoWindow({content:c.popup()(e.d,a.feature)}),b.set("position",a.latLng),h.open(c.map(),b)}),c.brushOn()&&c.map().data.addListener("click",l)},l=function(a){if(a.feature){var b=c.featureKeyAccessor()(a.feature);dc.events.trigger(function(){c.filter(b),dc.redrawAll(c.chartGroup())})}};return c.anchor(a,b)})}(),function(){"use strict";return!dc.googleMarkerChart&&void(dc.googleMarkerChart=function(a,b){var c=dc.baseGoogleChart({}),d=!1,e=!1,f=!1,g=!0,h=!1,i=!0,j=!1,k=!1,l=!1,m=!1,n={},o=[],p=!1,q=null,r=null;c.renderTitle(!0);var s=function(a){return c.keyAccessor()(a)},t=function(a){var b=new google.maps.Marker({position:c.toLocArray(c.locationAccessor()(a)),map:c.map(),title:c.renderTitle()?c.title()(a):"",clickable:c.renderPopup()||c.brushOn()&&!h,draggable:!1});return b};c._postRender=function(){c.brushOn()&&(h&&c.filterHandler(w),google.maps.event.addListener(c.map(),"zoom_changed",function(){c.map().getZoom()!==r&&(r=c.map().getZoom(),v("zoom"))},this),google.maps.event.addListener(c.map(),"dragend",function(){v("drag")},this),h||google.maps.event.addListener(c.map(),"click",function(){v("click")},this)),d&&(m=new MarkerClusterer(c.map()))},c._doRedraw=function(){var a=c._computeOrderedGroups(c.data()).filter(function(a){return 0!==c.valueAccessor()(a)});if(f)n={};else for(var b in n)n[b].setVisible(!1);d&&m.clearMarkers();var e=[],g=[],h=new google.maps.LatLngBounds;o=[],a.forEach(function(a){var b=c.keyAccessor()(a),i=null;!f&&b in n&&(i=n[b]),a.value?(null===i?i=u(a,b):i.setVisible(!0),h.extend(i.getPosition()),g.push(i),d?e.push(i):i.setMap(c.map()),o.push(i)):null!==i&&i.setVisible(!1)}),d&&e.length>0&&m.addMarkers(e),g.length&&(i||j&&!k)&&c.map().fitBounds(h),k=!1,i=!1},c.destroy=function(){
// clear markers and their events
for(var a in n)n.hasOwnProperty(a)&&(google.maps.event.clearInstanceListeners(n[a]),n[a].setMap(null),delete n[a]);
// clear map and it's events
google.maps.event.clearInstanceListeners(c.map()),c.map(null)},c.locationAccessor=function(a){return arguments.length?(s=a,c):s},c.marker=function(a){return arguments.length?(t=a,c):t},c.icon=function(a){return arguments.length?(p=a,c):p},c.cluster=function(a){return arguments.length?(d=a,c):d},c.clusterOptions=function(a){return arguments.length?(e=a,c):e},c.rebuildMarkers=function(a){return arguments.length?(f=a,c):f},c.brushOn=function(a){return arguments.length?(g=a,c):g},c.filterByArea=function(a){return arguments.length?(h=a,c):h},c.fitOnRender=function(a){return arguments.length?(i=a,c):i},c.fitOnRedraw=function(a){return arguments.length?(j=a,c):j},c.markerGroup=function(){return m},c.markers=function(a){return a?o:n};var u=function(a,b){var d=t(a);return d.key=b,c.renderPopup()&&google.maps.event.addListener(d,"click",function(){q&&q.close(),q=new google.maps.InfoWindow({content:c.popup()(a,d)}),q.open(c.map(),d)}),c.brushOn()&&!h&&google.maps.event.addListener(d,"click",x),n[b]=d,d},v=function(a){if(k=!0,h){var b;b=c.map().getCenter().equals(c.toLocArray(c.center()))&&c.map().getZoom()===c.zoom()?null:c.map().getBounds(),dc.events.trigger(function(){c.filter(null),b&&(l=!0,c.filter(b),l=!1),dc.redrawAll(c.chartGroup())})}else c.filter()&&("click"===a||c.filter()in n&&!c.map().getBounds().contains(n[c.filter()].getLatLng()))&&dc.events.trigger(function(){c.filter(null),c.renderPopup()&&c.map().closePopup(),dc.redrawAll(c.chartGroup())})},w=function(a,b){k=!0,c.dimension().filter(null),b&&b.length>0&&(c.dimension().filter(function(a){if(!(a in n))return!1;var c=n[a].position;return c&&b[0].contains(c)}),l||c.map().getBounds().toString===b[0].toString()||c.map().fitBounds(b[0]))},x=function(a){if(a.target){k=!0;var b=a.target.key;dc.events.trigger(function(){c.filter(b),dc.redrawAll(c.chartGroup())})}};return c.anchor(a,b)})}(),function(){"use strict";return!dc.googleCustomChart&&void(dc.googleCustomChart=function(a,b){var c=dc.baseGoogleChart({}),d=null,e=null;return c.renderTitle(!0),c._postRender=function(){var a=c._computeOrderedGroups(c.data());a.forEach(function(a,b){c.renderItem()(c,c.map(),a,b)})},c._doRedraw=function(){var a=c._computeOrderedGroups(c.data()),b=c.valueAccessor();a.forEach(function(a,d){a.filtered=0===b(a),c.redrawItem()(c,c.map(),a,d)})},c.redrawItem=function(a){return arguments.length?(d=a,c):d},c.renderItem=function(a){return arguments.length?(e=a,c):e},c.anchor(a,b)})}(),function(){"use strict";return!dc.tooltipMixin&&void(dc.tooltipMixin=function(a){return a&&(a.tip={},a.tip.tooltip=null,a.tip.init=function(){if(null===a.tip.tooltip){var b=a.svg().selectAll("g.sub");
// nothing to tip so exit
if(// if the chart has sub grouping (e.g. composite or series)
// if no sub grouping then just use the chart svg
b.empty()&&(b=a.svg()),
// get all elements that want a tooltip
a.tip.elements=b.selectAll("rect.bar,circle.dot,g.pie-slice,circle.bubble,g.row rect"),a.tip.elements.empty())return!1;
// create the tip object
a.tip.tooltip=d3.tip().attr("class","tip").html(function(b,c,d){var e=a.title();
// if the chart is a composite chart
a.children&&(e=a.children()[d].title()),
// if the chart is a paired row chart
"function"!=typeof e&&(e=e[d]),
// if a stackable chart
a.stack&&(e=a.title(b.layer));var f=b;return b.data&&(f=b.data),e(f)}),a.tip.tooltip.offset([-10,0]),
// add the tip to the elements
a.tip.elements.call(a.tip.tooltip),a.tip.elements.on("mouseover",a.tip.tooltip.show).on("mouseleave",a.tip.tooltip.hide),
// remove standard tooltips
a.tip.elements.each(function(){var a=d3.select(this),b=a.select("title");return!b.empty()&&(a.attr("data-title",b.text()),void b.remove())})}return a},a.tip.destroy=function(){// remove mouse events
// destroy the tip
// and set it to null
// add the standard tooltips back in
return null!==a.tip.tooltip&&(a.tip.elements.on("mouseover",null).on("mouseleave",null),a.tip.tooltip.destroy(),a.tip.tooltip=null,a.tip.elements.each(function(){var a=d3.select(this);a.append("title").text(a.attr("data-title"))})),a},a.tip.reinit=function(){a.tip.destroy(),a.tip.init()},a.tip.init()),a})}(),
// Code copied and changed from https://github.com/vlandham/gates_bubbles
function(){"use strict";return!dc.bubbleCloud&&void(dc.bubbleCloud=function(a,b){function c(){i.elasticRadius()&&i.r().domain([i.rMin(),i.rMax()]),i.r().range([i.MIN_RADIUS,i.xAxisLength()*i.maxBubbleRelativeSize()]),0===o.length?d():e(),h(),n=d3.layout.force().nodes(i.data()).size([i.width(),i.height()]),n.gravity(j).charge(g).friction(l).on("tick",function(a){o.each(f(a.alpha)).attr("cx",function(a){
// return d.x;
return a.x&&a.y&&d3.select(this.parentNode).attr("transform","translate("+a.x+","+a.y+")"),0}).attr("cy",function(a){
// return d.y;
return 0})}),n.start()}function d(){q=p.selectAll("g").data(i.data()).enter().append("g").attr("class",i.BUBBLE_NODE_CLASS),o=q.append("circle").attr("class",i.BUBBLE_CLASS).attr("r",0).attr("fill-opacity",1).attr("fill",function(a,b){return i.getColor(a,b)}).attr("stroke-width",2).on("click",i.onClick).on("mouseenter",function(a,b){d3.select(this).attr("stroke","#303030")}).on("mouseout",function(a,b){d3.select(this).attr("stroke","none")}),i._doRenderLabel(q),i._doRenderTitles(q),o.transition().duration(k).attr("r",function(a){return a.radius=i.bubbleR(a),a.radius})}function e(){o.data(i.data()).attr("r",function(a){return a.radius=i.bubbleR(a),a.radius}),i.doUpdateLabels(q),i.doUpdateTitles(q)}function f(a){var b=d3.geom.quadtree(i.data());return function(c){var d=c.radius+d3.max(i.data().map(function(a){return a.radius}))+m,e=c.x-d,f=c.x+d,g=c.y-d,h=c.y+d;b.visit(function(b,d,i,j,k){if(b.point&&b.point!==c){var l=c.x-b.point.x,n=c.y-b.point.y,o=Math.sqrt(l*l+n*n),p=c.radius+b.point.radius+m;o<p&&(o=(o-p)/o*a,c.x-=l*=o,c.y-=n*=o,b.point.x+=l,b.point.y+=n)}return d>f||j<e||i>h||k<g})}}function g(a){return-Math.pow(a.radius,2)/8}function h(){i.hasFilter()?q.each(function(a){i.hasFilter(i.keyAccessor()(a))?i.highlightSelected(this):i.fadeDeselected(this)}):q.each(function(){i.resetHighlight(this)})}var i=dc.bubbleMixin(dc.capMixin(dc.bubbleChart(a))),j=.2,k=1500,l=.25,m=5,n=null,o=[],p=null,q=null;return i._doRender=function(){return i.resetSvg(),p=i.svg().append("g"),o=[],c(),i},i._doRedraw=function(){return c(),i},i.anchor(a,b)})}(),function(){"use strict";/**
    ## Paired Row Chart
    Includes: [Cap Mixin](#cap-mixin), [Margin Mixin](#margin-mixin), [Color Mixin](#color-mixin), [Base Mixin](#base-mixin)

    Concrete paired row chart implementation.
    #### dc.pairedRowChart(parent[, chartGroup])
    Create a paired row chart instance and attach it to the given parent element.

    Parameters:

    * parent : string | node | selection - any valid
     [d3 single selector](https://github.com/mbostock/d3/wiki/Selections#selecting-elements) specifying
     a dom block element such as a div; or a dom element or d3 selection.

    * chartGroup : string (optional) - name of the chart group this chart instance should be placed in.
     Interaction with a chart will only trigger events and redraws within the chart's group.

    Returns:
    A newly created paired row chart instance

    ```js
    // create a paired row chart under #chart-container1 element using the default global chart group
    var chart1 = dc.pairedRowChart('#chart-container1');
    // create a paired row chart under #chart-container2 element using chart group A
    var chart2 = dc.pairedRowChart('#chart-container2', 'chartGroupA');
    ```
    **/
return!dc.pairedRowChart&&void(dc.pairedRowChart=function(a,b){function c(a){e[a]=function(b){return arguments.length?(h[a](b),i[a](b),e):[h[a](),i[a]()]}}function d(a){e[a]=function(){return h[a](),i[a](),e}}var e=dc.capMixin(dc.marginMixin(dc.colorMixin(dc.baseMixin({})))),f=d3.select(a).append("div"),g=d3.select(a).append("div"),h=dc.rowChart(f[0][0],b),i=dc.rowChart(g[0][0],b);h.useRightYAxis&&h.useRightYAxis(!0);
// data filtering
// we need a way to know which data belongs on the left chart and which data belongs on the right
var j=function(a){return a.key[0]},k=function(a){return a.key[0]};/**
        #### .leftKeyFilter([value]) - **mandatory**
        Set or get the left key filter attribute of a chart.

        For example
        function (d) {
            return d.key[0] === 'Male';
        }

        If a value is given, then it will be used as the new left key filter. If no value is specified then
        the current left key filter will be returned.

        **/
e.leftKeyFilter=function(a){return arguments.length?(j=a,e):j},/**
        #### .rightKeyFilter([value]) - **mandatory**
        Set or get the right key filter attribute of a chart.

        For example
        function (d) {
            return d.key[0] === 'Female';
        }

        If a value is given, then it will be used as the new right key filter. If no value is specified then
        the current right key filter will be returned.

        **/
e.rightKeyFilter=function(a){return arguments.length?(k=a,e):k},
// when trying to get the data for the left chart then filter all data using the leftKeyFilter function
h.data(function(a){var b=h.cap(),c=a.all().filter(function(a){return e.leftKeyFilter()(a)});return b===1/0?c:c.slice(0,b)}),
// when trying to get the data for the right chart then filter all data using the rightKeyFilter function
i.data(function(a){var b=i.cap(),c=a.all().filter(function(a){return e.rightKeyFilter()(a)});return b===1/0?c:c.slice(0,b)}),
// chart filtering
// on clicking either chart then filter both
h.onClick=i.onClick=function(a){var b=h.keyAccessor()(a);dc.events.trigger(function(){h.filter(b),i.filter(b),h.redrawGroup()})};
// width and margins
// the margins between the charts need to be set to 0 so that they sit together
var l=e.margins();// get the default margins
l.right=l.left,e.margins=function(a){
// set left chart margins
// set right chart margins
return arguments.length?(l=a,h.margins({top:a.top,right:0,bottom:a.bottom,left:a.left}),i.margins({top:a.top,right:a.right,bottom:a.bottom,left:0}),e):l},e.margins(l);// set the new margins
// the width needs to be halved
var m=0;// get the default width
e.width=function(a){
// set left chart width
// set right chart width
return arguments.length?(m=a,h.width(dc.utils.isNumber(a)?a/2:a),i.width(dc.utils.isNumber(a)?a/2:a),e):m};
// the minWidth needs to be halved
var n=e.minWidth();// get the default minWidth
e.minWidth=function(a){
// set left chart minWidth
// set right chart minWidth
return arguments.length?(n=a,h.minWidth(dc.utils.isNumber(a)?a/2:a),i.minWidth(dc.utils.isNumber(a)?a/2:a),e):n},e.minWidth(n),// set the new minWidth
// svg
// return an array of both the sub chart svgs
e.svg=function(){return d3.selectAll([h.svg()[0][0],i.svg()[0][0]])},
// data - we need to make sure that the extent is the same for both charts
// this way we need a new function that is overridable
h.calculateAxisScaleData?h.calculateAxisScaleData=i.calculateAxisScaleData=function(){return h.data().concat(i.data())}:e.group=function(a){if(!arguments.length)return h.group();h.group(a),i.group(a);
// set the new x axis scale
var b=d3.extent(a.all(),e.cappedValueAccessor);return b[0]>0&&(b[0]=0),h.x(d3.scale.linear().domain(b).range([h.effectiveWidth(),0])),i.x(d3.scale.linear().domain(b).range([0,i.effectiveWidth()])),e},
// get the charts - mainly used for testing
e.leftChart=function(){return h},e.rightChart=function(){return i};for(var o=[
// display
"height","minHeight","renderTitleLabel","fixedBarHeight","gap","othersLabel","transitionDuration","label","renderLabel","title","renderTitle","chartGroup","legend",
//colors
"colors","ordinalColors","linearColors","colorAccessor","colorDomain","getColor","colorCalculator",
// x axis
"x","elasticX","valueAccessor","labelOffsetX","titleLabelOffsetx","xAxis",
// y axis
"keyAccessor","labelOffsetY","yAxis",
// data
"cap","ordering","dimension","group","othersGrouper","data"],p=0;p<o.length;p++)c(o[p]);var q=["_doRedraw","redraw","_doRender","render","calculateColorDomain","filterAll","resetSvg","expireCache"];for(p=0;p<q.length;p++)d(q[p]);return e.anchor(a,b)})}(),function(){"use strict";angular.module("AngularDc",[])}(),function(){"use strict";var a=function(a,b){return{restrict:"E",scope:{chart:"=",type:"=",group:"=",options:"=",filters:"=",reset:"="},link:function(c,d){c.drawChart=function(){var a;if("string"==typeof c.type&&"object"==typeof c.options){if(c.cleanup(),c.reset&&(c.resetChart=function(){c.chart.filterAll(),dc.redrawAll()},d.append('<span class="reset" style="visibility:hidden;">Current filter: <span class="filter"></span></span>'),d.append(b('<a class="reset" style="visibility:hidden;" ng-click="resetChart()">reset</a>')(c))),c.chart=dc[c.type](d[0],c.group||void 0),"compositeChart"===c.type)for(a=0;a<c.options.compose.length;a++)c.options.compose[a].type&&"function"!=typeof c.options.compose[a].useRightYAxis&&(c.options.compose[a]=dc[c.options.compose[a].type](c.chart).options(c.options.compose[a]));if(c.chart.options(c.options),c.chart.render(),c.filters)for(a=0;a<c.filters.length;a++)c.chart.filter(c.filters[a]);
// set the model for custom use
c.chart=c.chart,c.resize()}},c.resize=function(){try{c.chart.data().length>0&&(c.chart.root().select("svg").attr("width","100%"),a(function(){c.chart.hasOwnProperty("rescale")&&c.chart.rescale(),dc.redrawAll()},100))}catch(a){}},c.cleanup=function(){c.chart&&(c.chart&&c.chart.destroy&&c.chart.destroy(),dc.deregisterChart(c.chart))},
//--------------------
// watchers
//--------------------
c.$watch("type",function(){c.type&&c.drawChart()}),c.$watch("options",function(){c.options&&c.drawChart()}),c.$watch("filters",function(){c.filters&&c.drawChart()}),
//--------------------
// destroy
//--------------------
c.$on("$destroy",function(){c.cleanup()})}}};a.$inject=["$timeout","$compile"],angular.module("AngularDc").directive("dcChart",a)}(),function(){"use strict";var a=function(){return{restrict:"E",scope:{options:"=",conditions:"="},link:function(a,b){var c=dc.serverChart(b[0]),d=!1;a.$watch("options",function(){!d&&a.options&&(c.options(a.options).render(),d=!0)}),a.$watch("conditions",function(){a.conditions&&c.conditions(a.conditions)})}}};a.$inject=[],angular.module("AngularDc").directive("dcServerChart",a)}(),function(){"use strict";return!dc.paginationMixin&&void(dc.paginationMixin=function(a){
// chart does not have a y axis if it is a row chart, so don't make it elastic
// chart is a bar chart so we need it to be elastic for it to work
// data information
// page information
// page controls
return a&&(a.y&&a.elasticX(!0),a.pagination={},a.pagination.allData=a.group().all(),a.pagination.currentPage=1,a.pagination.pageSize=5,a.pagination.pageCount=Math.ceil(a.pagination.allData.length/a.pagination.pageSize),a.pagination.setPage=function(b){b<1&&(b=1),b>a.pagination.pageCount&&(b=a.pagination.pageCount),b!==a.pagination.currentPage&&(a.pagination.currentPage=b,a.redraw(),a.tip&&a.tip.reinit())},a.pagination.previous=function(){a.pagination.setPage(a.pagination.currentPage-1)},a.pagination.next=function(){a.pagination.setPage(a.pagination.currentPage+1)},a.pagination.first=function(){a.pagination.setPage(1)},a.pagination.last=function(){a.pagination.setPage(a.pagination.pageCount)},a.group().all=function(){var b=(a.pagination.currentPage-1)*a.pagination.pageSize,c=a.pagination.currentPage*a.pagination.pageSize;return a._computeOrderedGroups(a.pagination.allData).slice(b,c)},a.redraw()),a})}(),function(){"use strict";return!dc.hexbinChart&&void(dc.hexbinChart=function(a,b){function c(){var a=e.effectiveWidth(),b=e.effectiveHeight(),c=e.data(),f=d3.scale.sqrt().domain([0,50]).range([0,20]),g=d3.hexbin().size([a,b]).radius(20);g.x(function(a){return Math.abs(a.key[0])}),g.y(function(a){return Math.abs(a.key[1])});var h=d3.scale.identity().domain([0,a]),i=d3.scale.linear().domain([0,b]).range([b,0]),j=d3.svg.axis().scale(h).orient("bottom").tickSize(6,-b),k=d3.svg.axis().scale(i).orient("left").tickSize(6,-a);d.append("clipPath").attr("id","clip").append("rect").attr("class","mesh").attr("width",a).attr("height",b),d.append("g").attr("clip-path","url(#clip)").selectAll(".hexagon").data(g(c)).enter().append("path").attr("class","hexagon").attr("d",function(a){return g.hexagon(f(a.length))}).attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),d.append("g").attr("class","y axis").attr("transform","translate(30, 10)").call(k),d.append("g").attr("class","x axis").attr("transform","translate(0,"+b+")").call(j)}var d,e=dc.marginMixin(dc.colorMixin(dc.baseMixin({})));return e._doRender=function(){return e.resetSvg(),d=e.svg().append("g"),c(),e},e._doRedraw=function(){return c(),e},e.anchor(a,b)})}();